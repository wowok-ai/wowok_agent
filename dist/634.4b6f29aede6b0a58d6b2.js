"use strict";(this.webpackChunkwowok_agent=this.webpackChunkwowok_agent||[]).push([[634],{1210:(t,e,s)=>{s.d(e,{LN:()=>c,OX:()=>i,aF:()=>r});var i,r,n=s(9554),a=s(5873),o=s(1609),_=s(5337);!function(t){t[t.POLICY_MODE_FREE=0]="POLICY_MODE_FREE",t[t.POLICY_MODE_STRICT=1]="POLICY_MODE_STRICT"}(i||(i={})),function(t){t[t.NORMAL=0]="NORMAL",t[t.WOWOK_GRANTEE=1]="WOWOK_GRANTEE",t[t.WOWOK_ORACLE=2]="WOWOK_ORACLE"}(r||(r={}));class c{permission;object;txb;get_object(){return this.object}constructor(t,e){this.txb=t,this.permission=e,this.object=""}static From(t,e,s){let i=new c(t,e);return i.object=n.Zs.TXB_OBJECT(t,s),i}static New(t,e,s,r=i.POLICY_MODE_FREE,a){n.Zs.IsValidObjects([e])||(0,_.f)(_.I.IsValidObjects,"permission"),(0,o.yW)(s)||(0,_.f)(_.I.IsValidDesription);let h=new c(t,e);return h.object=a?t.moveCall({target:n.Zs.Instance().repositoryFn("new_with_passport"),arguments:[a,t.pure.string(s),t.pure.u8(r),n.Zs.TXB_OBJECT(t,e)]}):t.moveCall({target:n.Zs.Instance().repositoryFn("new"),arguments:[t.pure.string(s),t.pure.u8(r),n.Zs.TXB_OBJECT(t,e)]}),h}launch(){return this.txb.moveCall({target:n.Zs.Instance().repositoryFn("create"),arguments:[n.Zs.TXB_OBJECT(this.txb,this.object)]})}add_data(t){c.IsValidName(t.key)||(0,_.f)(_.I.IsValidName,"add_data");let e=!0;t.data.forEach((t=>{(0,o.jE)(t.address)||(e=!1),c.IsValidValue(t.bcsBytes)||(e=!1)})),e||(0,_.f)(_.I.InvalidParam,"add_data"),void 0!==t?.value_type?t.data.forEach((e=>this.txb.moveCall({target:n.Zs.Instance().repositoryFn("add"),arguments:[n.Zs.TXB_OBJECT(this.txb,this.object),this.txb.pure.address(e.address),this.txb.pure.string(t.key),this.txb.pure.u8(t.value_type),this.txb.pure.vector("u8",[...e.bcsBytes]),n.Zs.TXB_OBJECT(this.txb,this.permission)]}))):t.data.forEach((e=>this.txb.moveCall({target:n.Zs.Instance().repositoryFn("add_typed_data"),arguments:[n.Zs.TXB_OBJECT(this.txb,this.object),this.txb.pure.address(e.address),this.txb.pure.string(t.key),this.txb.pure.vector("u8",[...e.bcsBytes]),n.Zs.TXB_OBJECT(this.txb,this.permission)]})))}add_data2(t){(0,o.jE)(t.address)||(0,_.f)(_.I.IsValidAddress,"add_data2");let e=!0;t.data.forEach((t=>{c.IsValidName(t.key)||(e=!1),c.IsValidValue(t.bcsBytes)||(e=!1)})),e||(0,_.f)(_.I.InvalidParam,"add_data2"),void 0!==t?.value_type?t.data.forEach((e=>this.txb.moveCall({target:n.Zs.Instance().repositoryFn("add"),arguments:[n.Zs.TXB_OBJECT(this.txb,this.object),this.txb.pure.address(t.address),this.txb.pure.string(e.key),this.txb.pure.u8(t.value_type),this.txb.pure.vector("u8",[...e.bcsBytes]),n.Zs.TXB_OBJECT(this.txb,this.permission)]}))):t.data.forEach((e=>this.txb.moveCall({target:n.Zs.Instance().repositoryFn("add_typed_data"),arguments:[n.Zs.TXB_OBJECT(this.txb,this.object),this.txb.pure.address(t.address),this.txb.pure.string(e.key),this.txb.pure.vector("u8",[...e.bcsBytes]),n.Zs.TXB_OBJECT(this.txb,this.permission)]})))}remove(t,e){c.IsValidName(e)||(0,_.f)(_.I.IsValidName),(0,o.jE)(t)||(0,_.f)(_.I.IsValidAddress),this.txb.moveCall({target:n.Zs.Instance().repositoryFn("remove"),arguments:[n.Zs.TXB_OBJECT(this.txb,this.object),this.txb.pure.address(t),this.txb.pure.string(e),n.Zs.TXB_OBJECT(this.txb,this.permission)]})}add_reference(t,e){0!==t.length&&((0,o.ij)(t,o.jE)||(0,_.f)(_.I.IsValidArray,"add_reference"),e?this.txb.moveCall({target:n.Zs.Instance().repositoryFn("reference_add_with_passport"),arguments:[e,n.Zs.TXB_OBJECT(this.txb,this.object),this.txb.pure.vector("address",(0,o.SI)(t)),n.Zs.TXB_OBJECT(this.txb,this.permission)]}):this.txb.moveCall({target:n.Zs.Instance().repositoryFn("reference_add"),arguments:[n.Zs.TXB_OBJECT(this.txb,this.object),this.txb.pure.vector("address",(0,o.SI)(t)),n.Zs.TXB_OBJECT(this.txb,this.permission)]}))}remove_reference(t,e,s){(0!==t.length||e)&&((0,o.ij)(t,o.jE)||(0,_.f)(_.I.IsValidArray,"remove_reference"),e?s?this.txb.moveCall({target:n.Zs.Instance().repositoryFn("reference_removeall_with_passport"),arguments:[s,n.Zs.TXB_OBJECT(this.txb,this.object),n.Zs.TXB_OBJECT(this.txb,this.permission)]}):this.txb.moveCall({target:n.Zs.Instance().repositoryFn("reference_removeall"),arguments:[n.Zs.TXB_OBJECT(this.txb,this.object),n.Zs.TXB_OBJECT(this.txb,this.permission)]}):s?this.txb.moveCall({target:n.Zs.Instance().repositoryFn("reference_remove_with_passport"),arguments:[s,n.Zs.TXB_OBJECT(this.txb,this.object),this.txb.pure.vector("address",(0,o.SI)(t)),n.Zs.TXB_OBJECT(this.txb,this.permission)]}):this.txb.moveCall({target:n.Zs.Instance().repositoryFn("reference_remove"),arguments:[n.Zs.TXB_OBJECT(this.txb,this.object),this.txb.pure.vector("address",(0,o.SI)(t)),n.Zs.TXB_OBJECT(this.txb,this.permission)]}))}add_policies(t,e){if(0===t.length)return;let s=!0;t.forEach((t=>{(0,o.yW)(t.description)&&c.IsValidName(t.key)||(s=!1)})),s||(0,_.f)(_.I.InvalidParam,"policies"),t.forEach((t=>{let s=this.txb.pure.option("u64",t?.permissionIndex?t?.permissionIndex:void 0);e?this.txb.moveCall({target:n.Zs.Instance().repositoryFn("policy_add_with_passport"),arguments:[e,n.Zs.TXB_OBJECT(this.txb,this.object),this.txb.pure.string(t.key),this.txb.pure.string(t.description),s,this.txb.pure.u8(t.dataType),n.Zs.TXB_OBJECT(this.txb,this.permission)]}):this.txb.moveCall({target:n.Zs.Instance().repositoryFn("policy_add"),arguments:[n.Zs.TXB_OBJECT(this.txb,this.object),this.txb.pure.string(t.key),this.txb.pure.string(t.description),s,this.txb.pure.u8(t.dataType),n.Zs.TXB_OBJECT(this.txb,this.permission)]})}))}remove_policies(t,e,s){0!==t.length&&((0,o.ij)(t,c.IsValidName)||(0,_.f)(_.I.InvalidParam,"policy_keys"),s?e?this.txb.moveCall({target:n.Zs.Instance().repositoryFn("policy_removeall_with_passport"),arguments:[s,n.Zs.TXB_OBJECT(this.txb,this.object),n.Zs.TXB_OBJECT(this.txb,this.permission)]}):this.txb.moveCall({target:n.Zs.Instance().repositoryFn("policy_remove_with_passport"),arguments:[s,n.Zs.TXB_OBJECT(this.txb,this.object),this.txb.pure.vector("string",(0,o.SI)(t)),n.Zs.TXB_OBJECT(this.txb,this.permission)]}):e?this.txb.moveCall({target:n.Zs.Instance().repositoryFn("policy_removeall"),arguments:[n.Zs.TXB_OBJECT(this.txb,this.object),n.Zs.TXB_OBJECT(this.txb,this.permission)]}):this.txb.moveCall({target:n.Zs.Instance().repositoryFn("policy_remove"),arguments:[n.Zs.TXB_OBJECT(this.txb,this.object),this.txb.pure.vector("string",(0,o.SI)(t)),n.Zs.TXB_OBJECT(this.txb,this.permission)]}))}rename_policy(t,e,s){(0,o.S7)(t)&&(0,o.S7)(e)||(0,_.f)(_.I.IsValidName,"change_policy"),s?this.txb.moveCall({target:n.Zs.Instance().repositoryFn("policy_rename_with_passport"),arguments:[s,n.Zs.TXB_OBJECT(this.txb,this.object),this.txb.pure.string(t),this.txb.pure.string(e),n.Zs.TXB_OBJECT(this.txb,this.permission)]}):this.txb.moveCall({target:n.Zs.Instance().repositoryFn("policy_rename"),arguments:[n.Zs.TXB_OBJECT(this.txb,this.object),this.txb.pure.string(t),this.txb.pure.string(e),n.Zs.TXB_OBJECT(this.txb,this.permission)]})}set_description(t,e){(0,o.yW)(t)||(0,_.f)(_.I.IsValidDesription),e?this.txb.moveCall({target:n.Zs.Instance().repositoryFn("description_set_with_passport"),arguments:[e,n.Zs.TXB_OBJECT(this.txb,this.object),this.txb.pure.string(t),n.Zs.TXB_OBJECT(this.txb,this.permission)]}):this.txb.moveCall({target:n.Zs.Instance().repositoryFn("description_set"),arguments:[n.Zs.TXB_OBJECT(this.txb,this.object),this.txb.pure.string(t),n.Zs.TXB_OBJECT(this.txb,this.permission)]})}set_policy_mode(t,e){e?this.txb.moveCall({target:n.Zs.Instance().repositoryFn("mode_set_with_passport"),arguments:[e,n.Zs.TXB_OBJECT(this.txb,this.object),this.txb.pure.u8(t),n.Zs.TXB_OBJECT(this.txb,this.permission)]}):this.txb.moveCall({target:n.Zs.Instance().repositoryFn("mode_set"),arguments:[n.Zs.TXB_OBJECT(this.txb,this.object),this.txb.pure.u8(t),n.Zs.TXB_OBJECT(this.txb,this.permission)]})}set_policy_description(t,e,s){c.IsValidName(t)||(0,_.f)(_.I.IsValidName,"policy"),(0,o.yW)(e)||(0,_.f)(_.I.IsValidDesription),s?this.txb.moveCall({target:n.Zs.Instance().repositoryFn("policy_description_set_with_passport"),arguments:[s,n.Zs.TXB_OBJECT(this.txb,this.object),this.txb.pure.string(t),this.txb.pure.string(e),n.Zs.TXB_OBJECT(this.txb,this.permission)]}):this.txb.moveCall({target:n.Zs.Instance().repositoryFn("policy_description_set"),arguments:[n.Zs.TXB_OBJECT(this.txb,this.object),this.txb.pure.string(t),this.txb.pure.string(e),n.Zs.TXB_OBJECT(this.txb,this.permission)]})}set_policy_permission(t,e,s){c.IsValidName(t)||(0,_.f)(_.I.IsValidName,"policy");let i=this.txb.pure.option("u64",void 0);void 0!==e&&(a.aX.IsValidPermissionIndex(e)||(0,_.f)(_.I.IsValidPermissionIndex),i=this.txb.pure.option("u64",e)),s?this.txb.moveCall({target:n.Zs.Instance().repositoryFn("policy_permission_set_with_passport"),arguments:[s,n.Zs.TXB_OBJECT(this.txb,this.object),i,n.Zs.TXB_OBJECT(this.txb,this.permission)]}):this.txb.moveCall({target:n.Zs.Instance().repositoryFn("policy_permission_set"),arguments:[n.Zs.TXB_OBJECT(this.txb,this.object),i,n.Zs.TXB_OBJECT(this.txb,this.permission)]})}change_permission(t){n.Zs.IsValidObjects([t])||(0,_.f)(_.I.IsValidObjects),this.txb.moveCall({target:n.Zs.Instance().repositoryFn("permission_set"),arguments:[n.Zs.TXB_OBJECT(this.txb,this.object),n.Zs.TXB_OBJECT(this.txb,this.permission),n.Zs.TXB_OBJECT(this.txb,t)],typeArguments:[]}),this.permission=t}static MAX_POLICY_COUNT=120;static MAX_KEY_LENGTH=128;static MAX_VALUE_LENGTH=204800;static MAX_REFERENCE_COUNT=100;static IsValidName=t=>t.length<=c.MAX_KEY_LENGTH&&0!=t.length;static IsValidValue=t=>t.length<c.MAX_VALUE_LENGTH;static rpc_de_data(t){const e=t?.map((t=>{const e=new Uint8Array(t?.data?.content?.fields?.value),s=e?.length>0?e[0]:null;var i=e.length>0?e.slice(1):Uint8Array.from([]);return s===n.eV.TYPE_STRING?(i=o.ji.getInstance().de(n.eV.TYPE_VEC_U8,i),i=(new TextDecoder).decode(Uint8Array.from(i))):s===n.eV.TYPE_VEC_STRING?i=(i=o.ji.getInstance().de(n.eV.TYPE_VEC_VEC_U8,i)).map((t=>(new TextDecoder).decode(Uint8Array.from(t)))):(i=o.ji.getInstance().de(e[0],i),s===n.eV.TYPE_ADDRESS?i="0x"+i:s===n.eV.TYPE_VEC_ADDRESS?i=i.map((t=>"0x"+t)):s===n.eV.TYPE_BOOL&&(i=i?"True":"False")),{object:t?.data?.content?.fields?.id?.id,id:t?.data?.content?.fields?.name?.fields?.id,name:t?.data?.content?.fields?.name?.fields?.key,data:i,dataType:(0,o.XF)(s)}}));return e}static DataType2ValueType(t){try{const e=BigInt(t);if(n.eV.TYPE_U8,e<=o.b_);else if(e<=o.VP)n.eV.TYPE_U64;else if(e<=o.Mc)n.eV.TYPE_U128;else{if(!(e<=o._J))return;n.eV.TYPE_U256}}catch(t){console.log(t)}}static ResolveRepositoryData=(t,e)=>{if(t===n.ml.String)return{type:n.eV.TYPE_STRING,data:o.ji.getInstance().ser(n.eV.TYPE_VEC_U8,(new TextEncoder).encode(e.toString()))};if(t===n.ml.PositiveNumber){const t=c.DataType2ValueType(e);if(!t)return;return{type:t,data:o.ji.getInstance().ser(t,e)}}if(t===n.ml.Address){if(!(0,o.jE)(e))return;return{type:n.eV.TYPE_ADDRESS,data:o.ji.getInstance().ser(n.eV.TYPE_ADDRESS,e)}}if(t===n.ml.Address_Vec){for(let t=0;t<e.length;++t)if(!(0,o.jE)(e[t]))return;return{type:n.eV.TYPE_VEC_ADDRESS,data:o.ji.getInstance().ser(n.eV.TYPE_VEC_ADDRESS,e)}}if(t===n.ml.PositiveNumber_Vec){let t=n.eV.TYPE_U8;for(let s=0;s<e.length;++s){const s=c.DataType2ValueType(e);if(!s)return;s>t&&(t=s)}return t=t===n.eV.TYPE_U8?n.eV.TYPE_VEC_U8:t===n.eV.TYPE_U64?n.eV.TYPE_VEC_U64:t===n.eV.TYPE_U128?n.eV.TYPE_VEC_U128:n.eV.TYPE_VEC_U256,{type:t,data:o.ji.getInstance().ser(t,e)}}if(t===n.ml.String_Vec){const t=e.map((t=>(new TextEncoder).encode(t)));return{type:n.eV.TYPE_VEC_STRING,data:o.ji.getInstance().ser(n.eV.TYPE_VEC_VEC_U8,t)}}if(t===n.ml.Bool){if("boolean"!=typeof e)return;return{type:n.eV.TYPE_BOOL,data:o.ji.getInstance().ser(n.eV.TYPE_BOOL,e)}}}}},4289:(t,e,s)=>{s.d(e,{k:()=>_});var i=s(9554),r=s(4285),n=s(1609),a=s(5337),o=s(8278);class _{permission;machine;object;txb;get_object(){return this.object}constructor(t,e,s){this.permission=s,this.txb=t,this.machine=e,this.object=""}static From(t,e,s,r){let n=new _(t,e,s);return n.object=i.Zs.TXB_OBJECT(t,r),n}static New(t,e,s,r,n){i.Zs.IsValidObjects([e,s])||(0,a.f)(a.I.IsValidObjects,"machine & permission");let o=new _(t,e,s),c=t.pure.option("address",r||void 0);return o.object=n?t.moveCall({target:i.Zs.Instance().progressFn("new_with_passport"),arguments:[n,c,i.Zs.TXB_OBJECT(t,e),i.Zs.TXB_OBJECT(t,s)]}):t.moveCall({target:i.Zs.Instance().progressFn("new"),arguments:[c,i.Zs.TXB_OBJECT(t,e),i.Zs.TXB_OBJECT(t,s)]}),o}launch(){return this.txb.moveCall({target:i.Zs.Instance().progressFn("create"),arguments:[i.Zs.TXB_OBJECT(this.txb,this.object)]})}set_namedOperator(t,e,s){(0,n.S7)(t)||(0,a.f)(a.I.IsValidName,"name"),t===r.u.OPERATOR_ORDER_PAYER&&(0,a.f)(a.I.InvalidParam,"name cannot be "+r.u.OPERATOR_ORDER_PAYER),(e.length>_.MAX_NAMED_OPERATOR_COUNT||!(0,n.ij)(e,n.jE))&&(0,a.f)(a.I.InvalidParam,"addresses"),s?this.txb.moveCall({target:i.Zs.Instance().progressFn("namedOperator_set_with_passport"),arguments:[s,i.Zs.TXB_OBJECT(this.txb,this.object),this.txb.pure.string(t),this.txb.pure.vector("address",(0,n.SI)(e)),i.Zs.TXB_OBJECT(this.txb,this.machine),i.Zs.TXB_OBJECT(this.txb,this.permission)]}):this.txb.moveCall({target:i.Zs.Instance().progressFn("namedOperator_set"),arguments:[i.Zs.TXB_OBJECT(this.txb,this.object),this.txb.pure.string(t),this.txb.pure.vector("address",(0,n.SI)(e)),i.Zs.TXB_OBJECT(this.txb,this.machine),i.Zs.TXB_OBJECT(this.txb,this.permission)]})}bind_task(t,e){(0,n.jE)(t)||(0,a.f)(a.I.IsValidAddress),e?this.txb.moveCall({target:i.Zs.Instance().progressFn("task_set_with_passport"),arguments:[e,i.Zs.TXB_OBJECT(this.txb,this.object),this.txb.pure.address(t),i.Zs.TXB_OBJECT(this.txb,this.machine),i.Zs.TXB_OBJECT(this.txb,this.permission)]}):this.txb.moveCall({target:i.Zs.Instance().progressFn("task_set"),arguments:[i.Zs.TXB_OBJECT(this.txb,this.object),this.txb.pure.address(t),i.Zs.TXB_OBJECT(this.txb,this.machine),i.Zs.TXB_OBJECT(this.txb,this.permission)]})}set_context_repository(t,e){t&&!i.Zs.IsValidObjects([t])&&(0,a.f)(a.I.IsValidObjects,"repository"),e?t?this.txb.moveCall({target:i.Zs.Instance().progressFn("context_repository_set_with_passport"),arguments:[e,i.Zs.TXB_OBJECT(this.txb,this.object),i.Zs.TXB_OBJECT(this.txb,t),i.Zs.TXB_OBJECT(this.txb,this.machine),i.Zs.TXB_OBJECT(this.txb,this.permission)]}):this.txb.moveCall({target:i.Zs.Instance().progressFn("context_repository_none_with_passport"),arguments:[e,i.Zs.TXB_OBJECT(this.txb,this.object),i.Zs.TXB_OBJECT(this.txb,this.machine),i.Zs.TXB_OBJECT(this.txb,this.permission)]}):t?this.txb.moveCall({target:i.Zs.Instance().progressFn("context_repository_set"),arguments:[i.Zs.TXB_OBJECT(this.txb,this.object),i.Zs.TXB_OBJECT(this.txb,t),i.Zs.TXB_OBJECT(this.txb,this.machine),i.Zs.TXB_OBJECT(this.txb,this.permission)]}):this.txb.moveCall({target:i.Zs.Instance().progressFn("context_repository_none"),arguments:[i.Zs.TXB_OBJECT(this.txb,this.object),i.Zs.TXB_OBJECT(this.txb,this.machine),i.Zs.TXB_OBJECT(this.txb,this.permission)]})}unhold(t,e){_.IsValidProgressNext(t)||(0,a.f)(a.I.InvalidParam,"unhold");const s=this.txb.sharedObjectRef(i.Zs.CLOCK_OBJECT);e?this.txb.moveCall({target:i.Zs.Instance().progressFn("unhold_with_passport"),arguments:[e,i.Zs.TXB_OBJECT(this.txb,this.object),i.Zs.TXB_OBJECT(this.txb,this.machine),this.txb.pure.string(t.next_node_name),this.txb.pure.string(t.forward),i.Zs.TXB_OBJECT(this.txb,this.permission),this.txb.object(s)]}):this.txb.moveCall({target:i.Zs.Instance().progressFn("unhold"),arguments:[i.Zs.TXB_OBJECT(this.txb,this.object),i.Zs.TXB_OBJECT(this.txb,this.machine),this.txb.pure.string(t.next_node_name),this.txb.pure.string(t.forward),i.Zs.TXB_OBJECT(this.txb,this.permission),this.txb.object(s)]})}parent_none(t){t?this.txb.moveCall({target:i.Zs.Instance().progressFn("parent_none_with_passport"),arguments:[t,i.Zs.TXB_OBJECT(this.txb,this.object),i.Zs.TXB_OBJECT(this.txb,this.machine),i.Zs.TXB_OBJECT(this.txb,this.permission)]}):this.txb.moveCall({target:i.Zs.Instance().progressFn("parent_none"),arguments:[i.Zs.TXB_OBJECT(this.txb,this.object),i.Zs.TXB_OBJECT(this.txb,this.machine),i.Zs.TXB_OBJECT(this.txb,this.permission)]})}parent(t,e){(0,n.jE)(t.parent_id)&&(0,n.aH)(t.parent_session_id)||(0,a.f)(a.I.InvalidParam,"parent"),t.next_node&&t.forward||(0,a.f)(a.I.InvalidParam,"parent"),e?this.txb.moveCall({target:i.Zs.Instance().progressFn("parent_set_with_passport"),arguments:[e,i.Zs.TXB_OBJECT(this.txb,this.object),i.Zs.TXB_OBJECT(this.txb,this.machine),this.txb.object(t.parent_id),this.txb.pure.u64(t.parent_session_id),this.txb.pure.string(t.next_node),this.txb.pure.string(t.forward),i.Zs.TXB_OBJECT(this.txb,this.permission)]}):this.txb.moveCall({target:i.Zs.Instance().progressFn("parent_set"),arguments:[i.Zs.TXB_OBJECT(this.txb,this.object),i.Zs.TXB_OBJECT(this.txb,this.machine),this.txb.object(t.parent_id),this.txb.pure.u64(t.parent_session_id),this.txb.pure.string(t.next_node),this.txb.pure.string(t.forward),i.Zs.TXB_OBJECT(this.txb,this.permission)]})}deliverable(t){(0,n.yW)(t.msg)||(0,a.f)(a.I.IsValidDesription,"deliverable.msg"),t.orders.length>0&&!i.Zs.IsValidObjects(t.orders.map((t=>t.object)))&&(0,a.f)(a.I.IsValidObjects,"deliverable.orders");const e=this.txb.moveCall({target:i.Zs.Instance().progressFn("deliverable_new"),arguments:[this.txb.pure.string(t.msg)]});return t.orders.forEach((t=>{(0,n.MA)(t.pay_token_type)||(0,a.f)(a.I.IsValidTokenType,"deliverable.orders:"+t.object),this.txb.moveCall({target:i.Zs.Instance().orderFn("as_deliverable"),arguments:[this.txb.object(t.object),e],typeArguments:[t.pay_token_type]})})),e}next(t,e,s){_.IsValidProgressNext(t)||(0,a.f)(a.I.InvalidParam,"next");const r=this.deliverable(e),n=this.txb.sharedObjectRef(i.Zs.CLOCK_OBJECT);return s?this.txb.moveCall({target:i.Zs.Instance().progressFn("next_with_passport"),arguments:[s,i.Zs.TXB_OBJECT(this.txb,this.object),i.Zs.TXB_OBJECT(this.txb,this.machine),this.txb.pure.string(t.next_node_name),this.txb.pure.string(t.forward),r,i.Zs.TXB_OBJECT(this.txb,this.permission),this.txb.object(n)]}):this.txb.moveCall({target:i.Zs.Instance().progressFn("next"),arguments:[i.Zs.TXB_OBJECT(this.txb,this.object),i.Zs.TXB_OBJECT(this.txb,this.machine),this.txb.pure.string(t.next_node_name),this.txb.pure.string(t.forward),r,i.Zs.TXB_OBJECT(this.txb,this.permission),this.txb.object(n)]})}hold(t,e){_.IsValidProgressNext(t)||(0,a.f)(a.I.InvalidParam,"hold");const s=this.txb.sharedObjectRef(i.Zs.CLOCK_OBJECT);return this.txb.moveCall({target:i.Zs.Instance().progressFn("hold"),arguments:[i.Zs.TXB_OBJECT(this.txb,this.object),i.Zs.TXB_OBJECT(this.txb,this.machine),this.txb.pure.string(t.next_node_name),this.txb.pure.string(t.forward),this.txb.pure.bool(e),i.Zs.TXB_OBJECT(this.txb,this.permission),this.txb.object(s)]})}static QueryForwardGuard=async(t,e,s,r,_)=>{if(!(t&&e&&r&&_))return void(0,a.f)(a.I.InvalidParam,"QueryForwardGuard");const c=new o.Z;c.moveCall({target:i.Zs.Instance().progressFn("query_guard"),arguments:[i.Zs.TXB_OBJECT(c,t),i.Zs.TXB_OBJECT(c,e),c.pure.string(r),c.pure.string(_)]});const h=await i.Zs.Client().devInspectTransactionBlock({sender:s,transactionBlock:c});if(1===h.results?.length&&1===h.results[0].returnValues?.length){const t=n.ji.getInstance().de("Option<address>",Uint8Array.from(h.results[0].returnValues[0][0]));return t?.some?"0x"+t?.some:void 0}};static DeSessions=t=>{let e=[];return t?.fields?.contents?.forEach((t=>{var s={next_node:t.fields.key,holders:[],weights:t.fields.value.fields.weights,threshold:t.fields.value.fields.threshold};t.fields.value.fields.forwards.fields.contents.forEach((t=>{s.holders.push({forward:t.fields.key,accomplished:t.fields.value.fields.accomplished,time:t.fields.value.fields.time,who:t.fields.value.fields.who,deliverable:{msg:t.fields.value.fields.msg,orders:t.fields.value.fields.orders??[]}})})),e.push(s)})),e};static DeHistories=t=>t?.map((t=>_.DeHistory(t?.data?.content?.fields)));static DeHistory=t=>({id:parseInt(t?.name),node:t?.value?.fields?.node,next_node:t?.value?.fields?.next_node,sessions:_.DeSessions(t?.value.fields?.session),time:t?.value?.fields?.time});static MAX_NAMED_OPERATOR_COUNT=20;static MAX_DELEVERABLE_ORDER_COUNT=20;static IsValidProgressNext=t=>(0,n.S7)(t.forward)&&(0,n.S7)(t.next_node_name)}},9554:(t,e,s)=>{s.d(e,{$Q:()=>C,A0:()=>l,Bd:()=>x,E6:()=>u,EL:()=>O,GX:()=>y,KE:()=>g,Kf:()=>d,Zs:()=>I,e$:()=>i,eV:()=>p,hu:()=>r,ml:()=>T,o8:()=>b,p_:()=>m,pl:()=>E});var i,r,n=s(9635),a=s(8091),o=s(9627),_=s(8278),c=s(1609),h=s(9298);!function(t){t.machine="machine",t.progress="progress",t.repository="repository",t.permission="permission",t.passport="passport",t.guard="guard",t.demand="demand",t.order="order",t.service="service",t.resource="resource",t.entity="entity",t.wowok="wowok",t.treasury="treasury",t.payment="payment",t.arbitration="arbitration",t.arb="arb"}(i||(i={})),function(t){t[t.TYPE_QUERY=1]="TYPE_QUERY",t[t.TYPE_NUMBER_ADD=2]="TYPE_NUMBER_ADD",t[t.TYPE_NUMBER_SUBTRACT=3]="TYPE_NUMBER_SUBTRACT",t[t.TYPE_NUMBER_MULTIPLY=4]="TYPE_NUMBER_MULTIPLY",t[t.TYPE_NUMBER_DEVIDE=5]="TYPE_NUMBER_DEVIDE",t[t.TYPE_NUMBER_MOD=6]="TYPE_NUMBER_MOD",t[t.TYPE_NUMBER_ADDRESS=7]="TYPE_NUMBER_ADDRESS",t[t.TYPE_LOGIC_AS_U256_GREATER=11]="TYPE_LOGIC_AS_U256_GREATER",t[t.TYPE_LOGIC_AS_U256_GREATER_EQUAL=12]="TYPE_LOGIC_AS_U256_GREATER_EQUAL",t[t.TYPE_LOGIC_AS_U256_LESSER=13]="TYPE_LOGIC_AS_U256_LESSER",t[t.TYPE_LOGIC_AS_U256_LESSER_EQUAL=14]="TYPE_LOGIC_AS_U256_LESSER_EQUAL",t[t.TYPE_LOGIC_AS_U256_EQUAL=15]="TYPE_LOGIC_AS_U256_EQUAL",t[t.TYPE_LOGIC_EQUAL=16]="TYPE_LOGIC_EQUAL",t[t.TYPE_LOGIC_HAS_SUBSTRING=17]="TYPE_LOGIC_HAS_SUBSTRING",t[t.TYPE_LOGIC_NOT=18]="TYPE_LOGIC_NOT",t[t.TYPE_LOGIC_AND=19]="TYPE_LOGIC_AND",t[t.TYPE_LOGIC_OR=20]="TYPE_LOGIC_OR"}(r||(r={}));const d=[[r.TYPE_LOGIC_AS_U256_GREATER,"Unsigned Integer >","The first item > anything that follows"],[r.TYPE_LOGIC_AS_U256_GREATER_EQUAL,"Unsigned Integer >=","The first item >= anything that follows"],[r.TYPE_LOGIC_AS_U256_LESSER,"Unsigned Integer <","The first item < anything that follows"],[r.TYPE_LOGIC_AS_U256_LESSER_EQUAL,"Unsigned Integer <=","The first item <= anything that follows"],[r.TYPE_LOGIC_AS_U256_EQUAL,"Unsigned Integer =","The first item = anything that follows"],[r.TYPE_LOGIC_EQUAL,"Equal","Data and type are exactly equal for all items"],[r.TYPE_LOGIC_HAS_SUBSTRING,"Has Sub String","The first string contains anything that follows"],[r.TYPE_LOGIC_NOT,"Not","Not operation"],[r.TYPE_LOGIC_AND,"And","All Items And operations"],[r.TYPE_LOGIC_OR,"Or","All Items Or operations"]];var p,T;!function(t){t[t.TYPE_BOOL=100]="TYPE_BOOL",t[t.TYPE_ADDRESS=101]="TYPE_ADDRESS",t[t.TYPE_U8=102]="TYPE_U8",t[t.TYPE_U64=103]="TYPE_U64",t[t.TYPE_VEC_U8=104]="TYPE_VEC_U8",t[t.TYPE_U128=105]="TYPE_U128",t[t.TYPE_VEC_ADDRESS=106]="TYPE_VEC_ADDRESS",t[t.TYPE_VEC_BOOL=107]="TYPE_VEC_BOOL",t[t.TYPE_VEC_VEC_U8=108]="TYPE_VEC_VEC_U8",t[t.TYPE_VEC_U64=109]="TYPE_VEC_U64",t[t.TYPE_VEC_U128=110]="TYPE_VEC_U128",t[t.TYPE_OPTION_ADDRESS=111]="TYPE_OPTION_ADDRESS",t[t.TYPE_OPTION_BOOL=112]="TYPE_OPTION_BOOL",t[t.TYPE_OPTION_U8=113]="TYPE_OPTION_U8",t[t.TYPE_OPTION_U64=114]="TYPE_OPTION_U64",t[t.TYPE_OPTION_U128=115]="TYPE_OPTION_U128",t[t.TYPE_OPTION_U256=116]="TYPE_OPTION_U256",t[t.TYPE_OPTION_STRING=117]="TYPE_OPTION_STRING",t[t.TYPE_OPTION_VEC_U8=118]="TYPE_OPTION_VEC_U8",t[t.TYPE_VEC_U256=119]="TYPE_VEC_U256",t[t.TYPE_STRING=120]="TYPE_STRING",t[t.TYPE_VEC_STRING=121]="TYPE_VEC_STRING",t[t.TYPE_U256=122]="TYPE_U256"}(p||(p={})),function(t){t[t.Address=200]="Address",t[t.Address_Vec=201]="Address_Vec",t[t.PositiveNumber=202]="PositiveNumber",t[t.PositiveNumber_Vec=203]="PositiveNumber_Vec",t[t.String=204]="String",t[t.String_Vec=205]="String_Vec",t[t.Bool=206]="Bool"}(T||(T={}));const b=[{type:T.String,name:"string",description:"String."},{type:T.Address,name:"address",description:"Object id or Personal address."},{type:T.PositiveNumber,name:"unsigned integer",description:"Including u8, u16 ,..., u256"},{type:T.String_Vec,name:"string vector",description:"Vector of string."},{type:T.Address_Vec,name:"address vector",description:"Vector of address."},{type:T.PositiveNumber_Vec,name:"unsigned integer vector",description:"Vector of unsigned integer"},{type:T.Bool,name:"bool",description:"True or False."}],l=Object.values(r).filter((t=>"number"==typeof t)),E=Object.values(p).filter((t=>"number"==typeof t)),m=t=>l.includes(t),u=t=>E.includes(t),g=t=>t===p.TYPE_U128||t===p.TYPE_U256||t===p.TYPE_U64||t===p.TYPE_U8;var O;!function(t){t[t.TYPE_SIGNER=60]="TYPE_SIGNER",t[t.TYPE_CLOCK=61]="TYPE_CLOCK",t[t.TYPE_GUARD=62]="TYPE_GUARD",t[t.TYPE_CONSTANT=80]="TYPE_CONSTANT"}(O||(O={}));const x=[{type:p.TYPE_BOOL,name:"bool",description:"boolean. eg:true or false",validator:t=>!0===t||!1===t},{type:p.TYPE_ADDRESS,name:"address",description:"address or object-id. eg:0x6789af",validator:c.jE},{type:O.TYPE_SIGNER,name:"txn signer",description:"signer address of the transaction"},{type:O.TYPE_GUARD,name:"guard address",description:"current guard address"},{type:O.TYPE_CLOCK,name:"txn time",description:"unsigned-64 number for the transaction time"},{type:p.TYPE_U64,name:"number",description:"unsigned-64 number. eg:23870233",validator:c.Ec},{type:p.TYPE_U8,name:"number",description:"unsigned-8 number. eg:255",validator:c.U5},{type:p.TYPE_VEC_U8,name:"string",description:'string or unsigned-8 number array. eg:"[1,2,3]"'},{type:p.TYPE_U128,name:"number",description:"unsigned-8 number. eg:12348900999",validator:c.ds},{type:p.TYPE_VEC_ADDRESS,name:"[address]",description:"address array. eg:[0x2277f2, 0x3344af]"},{type:p.TYPE_VEC_BOOL,name:"[bool]",description:"boolean array. eg:[true, false, true]"},{type:p.TYPE_VEC_VEC_U8,name:"[[number]]",description:'array of unsigned-8 number array. eg:["i", "like", "wowok"]'},{type:p.TYPE_VEC_U64,name:"[number]",description:"unsigned-64 number array. eg:[123, 778888, 42312]"},{type:p.TYPE_VEC_U128,name:"[number]",description:"unsigned-128 number array. eg:[123, 778888, 42312]"},{type:p.TYPE_OPTION_ADDRESS,name:"option",description:"option of address. eg:none or address"},{type:p.TYPE_OPTION_BOOL,name:"option",description:"option of bool. eg:none or boolean value"},{type:p.TYPE_OPTION_U8,name:"option",description:"option of u8. eg:none or u8 value"},{type:p.TYPE_OPTION_U64,name:"option",description:"option of u64. eg:none or u64 value"},{type:p.TYPE_OPTION_U128,name:"option",description:"option of u128. eg:none or u128 value"},{type:p.TYPE_OPTION_U256,name:"option",description:"option of u256. eg:none or u256 value"},{type:p.TYPE_VEC_U256,name:"[number]",description:"unsigned-256 number array. eg:[123, 778888, 42312]"},{type:p.TYPE_VEC_STRING,name:"[string]",description:'ascii string array. eg:["abc", "hi"]'},{type:p.TYPE_STRING,name:"string",description:'eg:"wowok"'},{type:p.TYPE_OPTION_STRING,name:"option",description:"option of string. eg:none or string value"},{type:p.TYPE_U256,name:"number",description:"unsigned-256 number. eg:12345678901233",validator:c.R0}];var C;!function(t){t.mainnet="mainnet",t.testnet="testnet",t.devnet="devnet",t.localnet="localnet"}(C||(C={}));const B="0xd9705a4f0b7ae3400d3af4ba781b2d2f6b4dc5dd81e2e1ce2bc949c16583df7f";class I{network="";packages=new Map;signer="";wowok_object="";entity_object="";treasury_cap="";oracle_object="";txb;static _instance;constructor(t=C.testnet){this.use_network(t),this.new_session()}static Instance(){return I._instance||(I._instance=new I),I._instance}static Client(){return new n.x({url:I.Instance().networkUrl()})}client(){return new n.x({url:this.networkUrl()})}use_network(t=C.testnet){switch(this.network=t,t){case C.localnet:case C.devnet:break;case C.testnet:this.packages.set("wowok","0xd1ed1921f385bb6c016070325950e87f1d0e3b6a5dcc67c7a9a7b66618f29239"),this.packages.set("base",B),this.packages.set("wowok_origin","0xd1ed1921f385bb6c016070325950e87f1d0e3b6a5dcc67c7a9a7b66618f29239"),this.packages.set("base_origin","0xd9705a4f0b7ae3400d3af4ba781b2d2f6b4dc5dd81e2e1ce2bc949c16583df7f"),this.wowok_object="0x04bc9f2680baa9e1cc1e52b329f7d7790afeb95f097b704c10116c257c5d07c4",this.entity_object="0x70623568c63000b21b7b5e180c7e5415970763335c3e3b90b1795b0fc164c60d",this.treasury_cap="0xfe7b18c27914fef876dfefd018350cfe33c45b6c5fbe5931f9449048e834da5b",this.oracle_object="0x70b4a282626aef7d31822079a1727a6576c718e9640cb30ad4c385d632138689";break;case C.mainnet:this.packages.set("wowok",""),this.packages.set("base",""),this.packages.set("wowok_origin",""),this.packages.set("base_origin",""),this.wowok_object="",this.entity_object="",this.treasury_cap="",this.oracle_object=""}}package(t){return this.packages.get(t)??""}objectWowok(){return this.wowok_object}objectEntity(){return this.entity_object}objectOracle(){return this.oracle_object}objectTreasuryCap(){return this.treasury_cap}networkUrl(){switch(this.network){case C.localnet:return"http://127.0.0.1:9000";case C.devnet:return"https://fullnode.devnet.sui.io:443";case C.testnet:return"https://fullnode.testnet.sui.io:443";case C.mainnet:return"https://fullnode.mainnet.sui.io:443"}return""}machineFn=t=>`${this.packages.get("wowok")}::${i.machine}::${t}`;progressFn=t=>`${this.packages.get("wowok")}::${i.progress}::${t}`;repositoryFn=t=>`${this.packages.get("wowok")}::${i.repository}::${t}`;permissionFn=t=>`${this.packages.get("wowok")}::${i.permission}::${t}`;passportFn=t=>`${this.packages.get("wowok")}::${i.passport}::${t}`;demandFn=t=>`${this.packages.get("wowok")}::${i.demand}::${t}`;orderFn=t=>`${this.packages.get("wowok")}::${i.order}::${t}`;serviceFn=t=>`${this.packages.get("wowok")}::${i.service}::${t}`;resourceFn=t=>`${this.packages.get("wowok")}::${i.resource}::${t}`;entityFn=t=>`${this.packages.get("wowok")}::${i.entity}::${t}`;wowokFn=t=>`${this.packages.get("wowok")}::${i.wowok}::${t}`;treasuryFn=t=>`${this.packages.get("wowok")}::${i.treasury}::${t}`;paymentFn=t=>`${this.packages.get("wowok")}::${i.payment}::${t}`;guardFn=t=>`${this.packages.get("base")}::${i.guard}::${t}`;baseWowokFn=t=>`${this.packages.get("base")}::${i.wowok}::${t}`;arbitrationFn=t=>`${this.packages.get("wowok")}::${i.arbitration}::${t}`;arbFn=t=>`${this.packages.get("wowok")}::${i.arb}::${t}`;query=async(t,e={showContent:!0})=>{const s=new n.x({url:this.networkUrl()}),i=t.map((t=>t.objectid)),r=await s.call("sui_multiGetObjects",[i,e]);for(let s=0;s<r.length;s++)t.forEach((t=>{t.callback(this,r[s],t,e)}));return r};query_raw=async(t,e={showContent:!0})=>{const s=new n.x({url:this.networkUrl()});return await s.call("sui_multiGetObjects",[t,e])};new_session=()=>(this.txb=new _.Z,this.txb);sessionCurrent=()=>this.txb?this.txb:this.new_session();sign_excute=async(t,e,s,i={showObjectChanges:!0})=>{const r=new n.x({url:this.networkUrl()});t.forEach((t=>{t(this,s)}));const _=(0,o.i)(e),c=a.h.fromSecretKey(_),h=await r.signAndExecuteTransaction({transaction:this.sessionCurrent(),signer:c,options:i});return this.txb=void 0,h};static SUI_TOKEN_TYPE="0x0000000000000000000000000000000000000000000000000000000000000002::sui::SUI";static SUI_COIN_TYPE="0x0000000000000000000000000000000000000000000000000000000000000002::coin::Coin<0x2::sui::SUI>";WOWOK_TOKEN_TYPE=()=>this.packages.get("base")+"::wowok::WOWOK";WOWOK_COIN_TYPE=()=>"0x2::coin::Coin<"+this.packages.get("base")+"::wowok::WOWOK>";COINS_TYPE=()=>{switch(this.network){case C.testnet:return this.CoinTypes_Testnet.filter((t=>!0!==t.alias));case C.mainnet:return this.CoinTypes_Mainnet.filter((t=>!0!==t.alias))}return[]};update_coinType=(t,e,s)=>{if(s&&t)switch(this.network){case C.testnet:(i=this.CoinTypes_Testnet.filter((e=>e?.type!==t))).push({symbol:s,type:t,decimals:e}),this.CoinTypes_Testnet=i;break;case C.mainnet:var i;(i=this.CoinTypes_Mainnet.filter((e=>e?.type!==t))).push({symbol:s,type:t,decimals:e}),this.CoinTypes_Mainnet=i}};explorerUrl=(t,e="object")=>this.network===C.testnet?"https://testnet.suivision.xyz/"+e+"/"+t:this.network===C.mainnet?"https://suivision.xyz/"+e+"/"+t:"";CoinTypes_Testnet=[{symbol:"SUI",type:"0x0000000000000000000000000000000000000000000000000000000000000002::sui::SUI",decimals:9,alias:!0},{symbol:"SUI",type:"0x2::sui::SUI",decimals:9},{symbol:"WOW",type:B+"::wowok::WOWOK",decimals:9}];CoinTypes_Mainnet=[{symbol:"SUI",type:"0x0000000000000000000000000000000000000000000000000000000000000002::sui::SUI",decimals:9,alias:!0},{symbol:"SUI",type:"0x2::sui::SUI",decimals:9},{symbol:"WOW",type:B+"::wowok::WOWOK",decimals:9},{symbol:"USDT",type:"0xc060006111016b8a020ad5b33834984a437aaa7d3c74c18e09a95d48aceab08c::coin::COIN",decimals:6},{symbol:"USDC",type:"0x5d4b302506645c37ff133b98c4b50a5ae14841659738d6d733d59d0d217a93bf::coin::COIN",decimals:6},{symbol:"WETH",type:"0xaf8cd5edc19c4512f4259f0bee101a40d41ebed738ade5874359610ef8eeced5::coin::COIN",decimals:8},{symbol:"WBNB",type:"0xb848cce11ef3a8f62eccea6eb5b35a12c4c2b1ee1af7755d02d7bd6218e8226f::coin::COIN",decimals:8}];coinTypeInfo=(t,e)=>{if(!t)return"loading";return this.COINS_TYPE().find((e=>e?.type===t))||(I.Client().getCoinMetadata({coinType:t}).then((s=>{s?.decimals&&s?.symbol&&(this.update_coinType(t,s?.decimals,s?.symbol),e({symbol:s.symbol,decimals:s.decimals,type:t}))})).catch((t=>{console.log(t)})),"loading")};static CLOCK_OBJECT={objectId:"0x6",mutable:!1,initialSharedVersion:1};static TXB_OBJECT(t,e){return"string"==typeof e?t.object(e):e}static IsValidObjects=t=>(0,c.ij)(t,(t=>!(!t||"string"==typeof t&&!(0,h.qD)(t))));WOWOK_OBJECTS_TYPE=()=>Object.keys(i).map((t=>(t===i.guard?this.packages.get("base"):this.packages.get("wowok"))+"::"+t+"::"+(0,c.ZH)(t)));WOWOK_OBJECTS_PREFIX_TYPE=()=>Object.keys(i).map((t=>(t===i.guard?this.packages.get("base"):this.packages.get("wowok"))+"::"+t+"::"));hasPackage(t){for(let e of this.packages.values())if(t.includes(e))return!0;return!1}object_name_from_type_repr=t=>{if(!t)return"";let e=t.indexOf("::");if(e>0&&this.hasPackage(t.slice(0,e))){e=t.indexOf("<"),e>0&&(t=t.slice(0,e));let s=t.lastIndexOf("::");if(s>0)return t.slice(s+2)}return""};module_object_name_from_type_repr=t=>{if(!t)return"";let e=t.indexOf("::");if(e>0&&this.hasPackage(t.slice(0,e))){e=t.indexOf("<"),e>0&&(t=t.slice(0,e));let s=t.indexOf("::");if(s>0)return t.slice(s+2)}return""}}class y{static Object_Type_Extra=()=>{let t=Object.keys(i).map((t=>t+"::"+(0,c.ZH)(t)));return t.push("order::Discount"),t};static objectids_from_response=(t,e,s)=>{let i=new Map;return e?.objectChanges&&e.objectChanges.forEach((e=>{y.Object_Type_Extra().forEach((s=>{"created"==e.type&&t.module_object_name_from_type_repr(e.objectType)===s&&(i.has(s)?i.get(s)?.push(e.objectId):i.set(s,[e.objectId]))}))})),s&&i.forEach(((t,e)=>{s.has(e)?s.set(e,s.get(e).concat(t)):s.set(e,t)})),i}}}}]);