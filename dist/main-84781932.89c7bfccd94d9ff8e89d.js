!function(e,r){if("object"==typeof exports&&"object"==typeof module)module.exports=r();else if("function"==typeof define&&define.amd)define([],r);else{var t=r();for(var i in t)("object"==typeof exports?exports:e)[i]=t[i]}}(this,(()=>(()=>{"use strict";var e,r,t,i,s,a={1229:(e,r,t)=>{t.r(r),t.d(r,{Account:()=>v.g,BCS:()=>d.r8,CacheData:()=>n.HL,CacheName:()=>n.iN,CacheType:()=>i.PT,CallArbitration:()=>d.kM,CallBase:()=>o.s,CallDemand:()=>u.W,CallGuard:()=>_.g,CallMachine:()=>f.g,CallObjectPermission:()=>p.H,CallPermission:()=>c.Q,CallPersonal:()=>b.R,CallRepository:()=>y.t,CallService:()=>m.U,CallTreasury:()=>l.c,EVENT_QUERY:()=>a.i,LocalStorageCache:()=>n.z7,MemeryCache:()=>n.a1,OBJECT_KEY:()=>n.WB,ResponseData:()=>o.$,WOWOK:()=>w,WowokCache:()=>n.c7,call_arbitration:()=>g.bi,call_arbitration_json:()=>g.os,call_demand:()=>g.ti,call_demand_json:()=>g.U1,call_guard:()=>g.JD,call_guard_json:()=>g.cm,call_machine:()=>g.h3,call_machine_json:()=>g._H,call_permission:()=>g.vF,call_permission_json:()=>g.q0,call_personal:()=>g.wi,call_personal_json:()=>g.nd,call_repository:()=>g.Um,call_repository_json:()=>g.H9,call_service:()=>g.ho,call_service_json:()=>g.q_,call_transfer_permission:()=>g.rL,call_transferpermission_json:()=>g.Tn,call_treasury:()=>g.Jj,call_treasury_json:()=>g.cW,data2object:()=>i.KV,getSuiMoveConfig:()=>d.PN,queryTableItem_ArbVote:()=>i.Qe,queryTableItem_DemandPresenter:()=>i.uk,queryTableItem_PermissionEntity:()=>i.fG,queryTableItem_Personal:()=>i.h$,query_objects:()=>i.w$,query_objects_json:()=>i.VB,query_permission:()=>s.l,query_permission_json:()=>s.O,query_personal_json:()=>i.F9,query_table:()=>i.EF,query_table_json:()=>i.LU,raw2type:()=>i.lS,tableItemQuery_MachineNode:()=>i.sm,tableItemQuery_MarkTag:()=>i.m4,tableItemQuery_ProgressHistory:()=>i.WH,tableItemQuery_RepositoryData:()=>i.tS,tableItemQuery_ServiceSale:()=>i.Zz,tableItemQuery_TreasuryHistory:()=>i.aU});var i=t(3245),s=t(1294),a=t(9832),n=t(3475),o=t(6401),c=t(7923),d=t(6607),l=t(4873),p=t(3769),u=t(7439),f=t(159),y=t(7604),m=t(6701),_=t(3503),b=t(300),v=t(9766),g=t(7473),w=t(7495)},1294:(e,r,t)=>{t.d(r,{O:()=>s,l:()=>a});var i=t(7495);const s=async e=>{try{const r=JSON.parse(e);return JSON.stringify({data:await a(r)})}catch(e){return JSON.stringify({error:e})}},a=async e=>{(0,i.IsValidAddress)(e.permission_object)||(0,i.ERROR)(i.Errors.IsValidAddress,"permission.permission_object");const r=new i.TransactionBlock;i.Permission.From(r,e.permission_object).query_permissions_all(e.address);const t=await i.Protocol.Client().devInspectTransactionBlock({sender:e.address,transactionBlock:r});t.results&&t.results[0].returnValues&&2!==t.results[0].returnValues.length&&(0,i.ERROR)(i.Errors.Fail,"permission.retValues");const s=i.Bcs.getInstance().de(i.BCS.U8,Uint8Array.from(t.results[0].returnValues[0][0]));if(s===i.Permission.PERMISSION_ADMIN||s===i.Permission.PERMISSION_OWNER_AND_ADMIN)return{who:e.address,admin:!0,owner:s%2==1,items:[],object:e.permission_object};{const r=i.Bcs.getInstance().de_perms(Uint8Array.from(t.results[0].returnValues[1][0]));return{who:e.address,admin:!1,owner:s%2==1,items:r.map((e=>({query:e?.index,permission:!0,guard:e?.guard}))),object:e.permission_object}}}},3245:(e,r,t)=>{t.d(r,{EF:()=>p,F9:()=>c,KV:()=>O,LU:()=>o,PT:()=>i,Qe:()=>y,VB:()=>n,WH:()=>b,Zz:()=>_,aU:()=>v,fG:()=>f,h$:()=>l,lS:()=>k,m4:()=>w,sm:()=>m,tS:()=>g,uk:()=>u,w$:()=>d});var i,s=t(7495),a=t(3475);!function(e){e.localStorage="localStorage",e.memoryStorage="memoryStorage"}(i||(i={}));const n=async e=>{try{const r=JSON.parse(e);return JSON.stringify({data:await d(r)})}catch(e){return JSON.stringify({error:e?.toString()})}},o=async e=>{try{const r=JSON.parse(e);return JSON.stringify({data:await p(r)})}catch(e){return JSON.stringify({error:e?.toString()})}},c=async e=>{try{const r=JSON.parse(e);return JSON.stringify({data:await l(r)??""})}catch(e){return JSON.stringify({error:e?.toString()})}},d=async e=>{var r=[];const t=[],i=(new Date).getTime(),n=a.c7.Instance().get(a.iN.object);if(n)for(let s=0;s<e.objects.length;++s){try{let o=n.load((0,a.WB)(e.objects[s],a.iN.object));if(o){const a=JSON.parse(o);if("INFINITE"!==a?.expire&&(e?.no_cache||a.expire<=i)&&(e.showOwner||e.showContent))t.push(e.objects[s]);else{const e=O(JSON.parse(a.data));e.cache_expire=a.expire,r.push(e)}}}catch(e){console.log(e)}t.push(e.objects[s])}if(t.length>0){const i=await s.Protocol.Client().multiGetObjects({ids:[...t],options:{showContent:e.showContent,showType:e.showType,showOwner:e.showOwner}}),n=a.c7.Instance().get(a.iN.object);if(n){const e=(new Date).getTime();i.forEach((r=>{try{if(r?.data){const t=r.data?.type??r.data?.content?.type??void 0,i=t?s.Protocol.Instance().object_name_from_type_repr(t):void 0,o={expire:"Guard"===i||"Payment"===i?"INFINITE":n.expire_time()+e,data:JSON.stringify(r.data)};n.save((0,a.WB)(r.data.objectId,a.iN.object),JSON.stringify(o))}}catch(e){console.log(e)}}))}r=r.concat(i.map((e=>O(e?.data))))}return{objects:r}},l=async e=>{(0,s.IsValidAddress)(e.address)||(0,s.ERROR)(s.Errors.IsValidAddress,"entity.address");const r=(new Date).getTime(),t=a.c7.Instance().get(a.iN.personal);if(t&&!e.no_cache)try{let i=t.load((0,a.WB)(e.address,a.iN.personal));if(i){const e=JSON.parse(i);if("INFINITE"===e?.expire||e.expire<=r){const r=JSON.parse(e.data);return r.cache_expire=e.expire,r}}}catch(e){console.log(e)}const i=await P(h(s.Protocol.Instance().objectEntity(),e.address));if("Personal"===i.type){if(t)try{const r=t.expire_time()+(new Date).getTime(),s={expire:r,data:JSON.stringify(i)};t.save((0,a.WB)(e.address,a.iN.personal),JSON.stringify(s)),i.cache_expire=r}catch(e){console.log(e)}return i}},p=async e=>{const r=await s.Protocol.Client().getDynamicFields({parentId:e.parent,cursor:e.cursor,limit:e.limit});return{items:r?.data?.map((e=>({object:e.objectId,type:e.type,version:e.version,key:{type:e.name.type,value:e.name.value}}))),nextCursor:r.nextCursor,hasNextPage:r.hasNextPage}},u=async(e,r)=>await P(h(e,r)),f=async(e,r)=>await P(h(e,r)),y=async(e,r)=>await P(h(e,r)),m=async(e,r)=>await P(j(e,r)),_=async(e,r)=>await P(j(e,r)),b=async(e,r)=>await P(I(e,r)),v=async(e,r)=>await P(I(e,r)),g=async(e,r,t)=>("string"!=typeof e&&(e=e.object),await P({parent:e,key:{type:s.Protocol.Instance().package("wowok")+"::repository::DataKey",value:{id:r,key:t}}})),w=async(e,r)=>await P(h(e,r));function h(e,r){return"string"!=typeof e&&(e=e.object),{parent:e,key:{type:"address",value:r}}}function j(e,r){return"string"!=typeof e&&(e=e.object),{parent:e,key:{type:"0x1::string::String",value:r}}}function I(e,r){return"string"!=typeof e&&(e=e.object),{parent:e,key:{type:"u64",value:r}}}const P=async e=>{const r=await s.Protocol.Client().getDynamicFieldObject({parentId:e.parent,name:{type:e.key.type,value:e.key.value}});return O(r?.data)};function k(e){if(!e)return;const r=s.Protocol.Instance().object_name_from_type_repr(e);if("Permission"===r||"Demand"===r||"Machine"===r||"Progress"===r||"Order"===r||"Service"===r||"Treasury"===r||"Arb"===r||"Repository"===r||"Payment"===r||"Discount"===r||"Guard"===r||"Arbitration"===r)return r;if("Resource"===r)return"PersonalMark";const t=e?.indexOf("0x2::dynamic_field::Field<");if(0===t){const r=e?.substring(26);if(r&&s.Protocol.Instance().hasPackage(r)){if(r.includes("::demand::Tips>"))return"TableItem_DemandPresenter";if(r.includes("::machine::NodePair>>>"))return"TableItem_MachineNode";if(r.includes("::progress::History>"))return"TableItem_ProgressHistory";if(r.includes("::service::Sale>"))return"TableItem_ServiceSale";if(r.includes("::treasury::Record>"))return"TableItem_TreasuryHistory";if(r.includes("::arb::Voted>"))return"TableItem_ArbVote";if(r.includes("::permission::Perm>>"))return"TableItem_PermissionEntity";if(r.includes("::repository::DataKey"))return"TableItem_RepositoryData";if(r.includes("::entity::Ent>"))return"Personal";if(r.includes("::resource::Tags>"))return"TableItem_PersonalMark"}}}function O(e){const r=e?.content?.fields,t=e?.objectId??r?.id?.id??void 0,i=e?.type??e?.content?.type??void 0,a=e?.version??void 0,n=e?.owner??void 0,o=k(i);if(o)switch(o){case"Permission":return{object:t,type:o,type_raw:i,owner:n,version:a,builder:r?.builder??"",admin:r?.admin,description:r?.description??"",entity_count:parseInt(r?.table?.fields?.size),biz_permission:r?.user_define?.fields?.contents?.map((e=>({id:parseInt(e?.fields?.key),name:e?.fields?.value})))};case"Demand":return{object:t,type:o,type_raw:i,owner:n,version:a,permission:r?.permission,description:r?.description,guard:r?.guard?{object:r?.guard,service_id_in_guard:r?.service_identifier}:void 0,time_expire:r?.time_expire,yes:r?.yes,presenter_count:parseInt(r?.presenters?.fields?.size),bounty:r?.bounty?.map((e=>({type:e?.fields?.type,object:e?.fields?.id?.id,balance:e?.fields?.balance})))};case"Machine":return{object:t,type:o,type_raw:i,owner:n,version:a,permission:r?.permission??"",description:r?.description??"",bPaused:r?.bPaused,bPublished:r?.bPublished,endpoint:r?.endpoint,consensus_repository:r?.consensus_repositories,node_count:parseInt(r?.nodes?.fields?.size)};case"Progress":return{object:t,type:o,type_raw:i,owner:n,version:a,machine:r?.machine,current:r?.current,task:r?.task,parent:r?.parent,history_count:parseInt(r?.history?.fields?.contents?.fields?.size),namedOperator:r?.namedOperator?.fields?.contents?.map((e=>({name:e?.fields?.key,operator:e?.fields?.value}))),session:r?.session?.fields?.contents?.map((e=>({weights:e?.fields?.value?.fields?.weight,threshold:e?.fields?.value?.fields?.threshold,next_node:e?.fields?.key,forward:e?.fields?.value?.fields?.forwards?.fields?.contents?.map((e=>({forward_name:e?.fields?.key,accomplished:e?.fields?.value?.fields?.accomplished,msg:e?.fields?.value?.fields?.msg,orders:e?.fields?.value?.fields?.orders,time:e?.fields?.value?.fields?.time,holder:e?.fields?.value?.fields?.who})))})))};case"Order":return{object:t,type:o,type_raw:i,owner:n,version:a,service:r?.service,amount:r?.amount,agent:r?.agent,arb:r?.dispute,payer:r?.payer,progress:r?.progress,discount:r?.discount,balance:r?.payed,required_info:r?.required_info?{pubkey:r?.required_info?.fields?.customer_pub,msg_encrypted:r?.required_info?.fields?.info}:void 0,item:r?.items?.map((e=>({name:e?.fields?.name,price:e?.fields?.price,stock:e?.fields?.stock,endpoint:e?.fields?.endpoint})))};case"Service":return{object:t,type:o,type_raw:i,owner:n,version:a,machine:r?.machine,permission:r?.permission,description:r?.description,arbitration:r?.arbitrations,bPaused:r?.bPaused,bPublished:r?.bPublished,buy_guard:r?.buy_guard,endpoint:r?.endpoint,payee:r?.payee,repository:r?.repositories,withdraw_guard:r?.withdraw_guard?.fields?.contents?.map((e=>({object:e?.fields?.key,percent:e?.fields?.value}))),refund_guard:r?.refund_guard?.fields?.contents?.map((e=>({object:e?.fields?.key,percent:e?.fields?.value}))),sales_count:parseInt(r?.sales?.fields?.size),extern_withdraw_treasury:r?.extern_withdraw_treasuries,customer_required_info:r?.customer_required?{pubkey:r?.customer_required?.fields?.service_pubkey,required_info:r?.customer_required?.fields?.customer_required_info}:void 0};case"Treasury":return{object:t,type:o,type_raw:i,owner:n,version:a,permission:r?.permission,description:r?.description,withdraw_mode:r?.withdraw_mode,history_count:parseInt(r?.history?.fields?.contents?.fields?.size),balance:r?.balance,deposit_guard:r?.deposit_guard,withdraw_guard:r?.withdraw_guard?.fields?.contents?.map((e=>({object:e?.fields?.key,percent:e?.fields?.value})))};case"Arbitration":return{object:t,type:o,type_raw:i,owner:n,version:a,permission:r?.permission,description:r?.description,fee:r?.fee,fee_treasury:r?.fee_treasury,usage_guard:r?.usage_guard,endpoint:r?.endpoint,bPaused:r?.bPaused,voting_guard:r?.voting_guard?.fields?.contents?.map((e=>({object:e?.fields?.key,weights:e?.fields?.value})))};case"Arb":return{object:t,type:o,type_raw:i,owner:n,version:a,arbitration:r?.arbitration,description:r?.description,fee:r?.fee,feedback:r?.feedback,indemnity:r?.indemnity,order:r?.order,voted_count:parseInt(r?.voted?.fields?.size),proposition:r?.proposition?.fields?.contents?.map((e=>({proposition:e?.fields?.key,votes:e?.fields?.value})))};case"Repository":return{object:t,type:o,type_raw:i,owner:n,version:a,permission:r?.permission,description:r?.description,policy_mode:r?.policy_mode,data_count:parseInt(r?.data?.fields?.size),reference:r?.reference,rep_type:r?.type,policy:r?.policies?.fields?.contents?.map((e=>({key:e?.fields?.key,description:e?.fields?.value?.fields?.description,permissionIndex:e?.fields?.value?.fields?.permission_index,dataType:e?.fields?.value?.fields?.value_type})))};case"Payment":return{object:t,type:o,type_raw:i,owner:n,version:a,signer:r?.signer,time:r?.time,remark:r?.remark,from:r?.from,biz_id:r?.index,for_guard:r?.for_guard,for_object:r?.for_object,amount:r?.amount,record:r?.record?.map((e=>({recipient:e?.fields?.recipient,amount:e?.fields?.amount})))};case"Discount":return{object:t,type:o,type_raw:i,owner:n,version:a,service:r?.service,time_start:r?.time_start,time_end:r?.time_end,price_greater:r?.price_greater,off_type:r?.type,off:r?.off,name:r?.name};case"Guard":return{object:t,type:o,type_raw:i,owner:n,version:a,description:r?.description,input:Uint8Array.from(r?.input?.fields?.bytes),identifier:r?.constants?.map((e=>({id:e?.fields?.identifier,bWitness:e?.fields?.bWitness,value:Uint8Array.from(e?.fields?.value)})))};case"PersonalMark":return{object:t,type:o,type_raw:i,owner:n,version:a,tag_count:parseInt(r?.tags?.fields?.size)};case"TableItem_DemandPresenter":return{object:t,type:o,type_raw:i,owner:n,version:a,service:r?.name,presenter:r?.value?.fields?.who,recommendation:r?.value?.fields?.tips};case"TableItem_ProgressHistory":return{object:t,type:o,type_raw:i,owner:n,version:a,history:s.Progress.DeHistory(r)};case"TableItem_ServiceSale":return{object:t,type:o,type_raw:i,owner:n,version:a,item:{item:r?.name,stock:r?.value?.fields?.stock,price:r?.value?.fields?.price,endpoint:r?.value?.fields?.endpoint}};case"TableItem_TreasuryHistory":return{object:t,type:o,type_raw:i,owner:n,version:a,id:r?.name,payment:r?.value?.fields?.payment,signer:r?.value?.fields?.signer,operation:r?.value?.fields?.op,amount:r?.value?.fields?.amount,time:r?.value?.fields?.time};case"TableItem_ArbVote":return{object:t,type:o,type_raw:i,owner:n,version:a,singer:r?.name,vote:r?.value?.fields?.agrees,time:r?.value?.fields?.time,weight:r?.value?.fields?.weight};case"TableItem_PermissionEntity":return{object:t,type:o,type_raw:i,owner:n,version:a,entity:r?.name,permission:r?.value?.map((e=>({id:e?.fields.index,guard:e?.fields.guard})))};case"TableItem_RepositoryData":return{object:t,type:o,type_raw:i,owner:n,version:a,address:r?.name?.fields?.id,key:r?.name?.fields?.key,data:Uint8Array.from(r?.value)};case"Personal":const c=s.Bcs.getInstance().de_entInfo(Uint8Array.from(r?.value?.fields?.avatar));return{object:t,type:o,type_raw:i,owner:n,version:a,address:r?.name,like:r?.value?.fields?.like,dislike:r?.value?.fields?.dislike,mark_object:r?.value?.fields?.resource,lastActive_digest:e?.previousTransaction,info:{homepage:c?.homepage,name:c?.name,avatar:c?.avatar,twitter:c?.twitter,discord:c?.discord,description:c?.description}};case"TableItem_PersonalMark":return{object:t,type:o,type_raw:i,owner:n,version:a,address:r?.name,name:r?.value?.fields?.nick,tags:r?.value?.fields?.tags}}return{object:t,type:void 0,type_raw:i,owner:n,version:a}}}},n={};function o(e){var r=n[e];if(void 0!==r)return r.exports;var t=n[e]={exports:{}};return a[e](t,t.exports,o),t.exports}o.m=a,e=[],o.O=(r,t,i,s)=>{if(!t){var a=1/0;for(l=0;l<e.length;l++){for(var[t,i,s]=e[l],n=!0,c=0;c<t.length;c++)(!1&s||a>=s)&&Object.keys(o.O).every((e=>o.O[e](t[c])))?t.splice(c--,1):(n=!1,s<a&&(a=s));if(n){e.splice(l--,1);var d=i();void 0!==d&&(r=d)}}return r}s=s||0;for(var l=e.length;l>0&&e[l-1][2]>s;l--)e[l]=e[l-1];e[l]=[t,i,s]},t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__,o.t=function(e,i){if(1&i&&(e=this(e)),8&i)return e;if("object"==typeof e&&e){if(4&i&&e.__esModule)return e;if(16&i&&"function"==typeof e.then)return e}var s=Object.create(null);o.r(s);var a={};r=r||[null,t({}),t([]),t(t)];for(var n=2&i&&e;"object"==typeof n&&!~r.indexOf(n);n=t(n))Object.getOwnPropertyNames(n).forEach((r=>a[r]=()=>e[r]));return a.default=()=>e,o.d(s,a),s},o.d=(e,r)=>{for(var t in r)o.o(r,t)&&!o.o(e,t)&&Object.defineProperty(e,t,{enumerable:!0,get:r[t]})},o.f={},o.e=e=>Promise.all(Object.keys(o.f).reduce(((r,t)=>(o.f[t](e,r),r)),[])),o.u=e=>e+".6489b6fe957095e872d4.js",o.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),o.o=(e,r)=>Object.prototype.hasOwnProperty.call(e,r),i={},s="wowok_agent:",o.l=(e,r,t,a)=>{if(i[e])i[e].push(r);else{var n,c;if(void 0!==t)for(var d=document.getElementsByTagName("script"),l=0;l<d.length;l++){var p=d[l];if(p.getAttribute("src")==e||p.getAttribute("data-webpack")==s+t){n=p;break}}n||(c=!0,(n=document.createElement("script")).charset="utf-8",n.timeout=120,o.nc&&n.setAttribute("nonce",o.nc),n.setAttribute("data-webpack",s+t),n.src=e),i[e]=[r];var u=(r,t)=>{n.onerror=n.onload=null,clearTimeout(f);var s=i[e];if(delete i[e],n.parentNode&&n.parentNode.removeChild(n),s&&s.forEach((e=>e(t))),r)return r(t)},f=setTimeout(u.bind(null,void 0,{type:"timeout",target:n}),12e4);n.onerror=u.bind(null,n.onerror),n.onload=u.bind(null,n.onload),c&&document.head.appendChild(n)}},o.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{var e;o.g.importScripts&&(e=o.g.location+"");var r=o.g.document;if(!e&&r&&(r.currentScript&&"SCRIPT"===r.currentScript.tagName.toUpperCase()&&(e=r.currentScript.src),!e)){var t=r.getElementsByTagName("script");if(t.length)for(var i=t.length-1;i>-1&&(!e||!/^http(s?):/.test(e));)e=t[i--].src}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/^blob:/,"").replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),o.p=e})(),(()=>{var e={185:0};o.f.j=(r,t)=>{var i=o.o(e,r)?e[r]:void 0;if(0!==i)if(i)t.push(i[2]);else{var s=new Promise(((t,s)=>i=e[r]=[t,s]));t.push(i[2]=s);var a=o.p+o.u(r),n=new Error;o.l(a,(t=>{if(o.o(e,r)&&(0!==(i=e[r])&&(e[r]=void 0),i)){var s=t&&("load"===t.type?"missing":t.type),a=t&&t.target&&t.target.src;n.message="Loading chunk "+r+" failed.\n("+s+": "+a+")",n.name="ChunkLoadError",n.type=s,n.request=a,i[1](n)}}),"chunk-"+r,r)}},o.O.j=r=>0===e[r];var r=(r,t)=>{var i,s,[a,n,c]=t,d=0;if(a.some((r=>0!==e[r]))){for(i in n)o.o(n,i)&&(o.m[i]=n[i]);if(c)var l=c(o)}for(r&&r(t);d<a.length;d++)s=a[d],o.o(e,s)&&e[s]&&e[s][0](),e[s]=0;return o.O(l)},t=this.webpackChunkwowok_agent=this.webpackChunkwowok_agent||[];t.forEach(r.bind(null,0)),t.push=r.bind(null,t.push.bind(t))})();var c=o.O(void 0,[112,30,876,706,658,867,652,412,153,947,620,485,701,495,873,634,253,875,446,181,428],(()=>o(1229)));return o.O(c)})()));