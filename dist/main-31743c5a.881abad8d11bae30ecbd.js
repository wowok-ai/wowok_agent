"use strict";(this.webpackChunkwowok_agent=this.webpackChunkwowok_agent||[]).push([[428],{300:(a,e,t)=>{t.d(e,{R:()=>i});var r=t(7495),s=t(6401);class i extends s.s{data;constructor(a){super(),this.data=a}async call(a){return await this.exec(a)}async operate(a,e,t){let s,i=r.Entity.From(a);const d=this.data?.object?.address;if(s=d&&(0,r.IsValidAddress)(d)?r.Resource.From(a,d):r.Resource.From(a,i.create_resource2()),"destroy"!==this.data?.mark?.op){if(void 0!==this.data?.information&&i.update(this.data.information),s&&s?.get_object()){if(void 0!==this.data?.mark)switch(this.data.mark.op){case"add or set":this.data.mark.data.forEach((a=>{s?.add(a.address,a.tags,a.name)}));break;case"remove":this.data.mark.data.forEach((a=>{s?.remove(a.address,a.tags)}));break;case"removeall":this.data.mark.addresses.forEach((a=>{s?.removeall(a)}))}"transfer"===this.data?.mark?.op&&s&&(0,r.IsValidAddress)(this.data.mark.address)&&i.transfer_resource(s,this.data.mark.address),"replace"===this.data?.mark?.op&&(0,r.IsValidAddress)(this.data.mark.address)&&i.use_resource(r.Resource.From(a,this.data.mark.address)),!d&&s&&await this.new_with_mark(a,s.launch(),this.data?.object?.namedNew,t)}}else i.destroy_resource(s)}}},3769:(a,e,t)=>{t.d(e,{H:()=>d});var r=t(6401),s=t(7495),i=t(3245);class d extends r.s{data;constructor(a){super(),this.data=a}async call(a){if((0,s.IsValidAddress)(this.data.new_permission)||(0,s.ERROR)(s.Errors.InvalidParam,"CallObjectPermission_Data.new_permission"+this.data.new_permission),this.data?.objects.length>0)return await this.exec(a)}async operate(a,e){const t=await(0,i.w$)({objects:this.data.objects,showContent:!0});t.objects?.forEach((e=>{switch(e.type){case"Demand":const t=e;s.Demand.From(a,s.Demand.parseObjectType(t.type_raw),t.permission,t.object).change_permission(this.data.new_permission);break;case"Machine":const r=e;s.Machine.From(a,r.permission,r.object).change_permission(this.data.new_permission);break;case"Service":const i=e;s.Service.From(a,s.Service.parseObjectType(i.type_raw),i.permission,i.object).change_permission(this.data.new_permission);break;case"Treasury":const d=e;s.Treasury.From(a,s.Treasury.parseObjectType(d.type_raw),d.permission,d.object).change_permission(this.data.new_permission);break;case"Arbitration":const o=e;s.Arbitration.From(a,s.Arbitration.parseObjectType(o.type_raw),o.permission,o.object).change_permission(this.data.new_permission);break;case"Repository":const n=e;s.Repository.From(a,n.permission,n.object).change_permission(this.data.new_permission)}}))}}},4873:(a,e,t)=>{t.d(e,{c:()=>o});var r=t(7495),s=t(3245),i=t(6401),d=t(9766);class o extends i.s{data;constructor(a){super(),this.data=a}async call(a){this.data.type_parameter&&(0,r.IsValidArgType)(this.data.type_parameter)||(0,r.ERROR)(r.Errors.IsValidArgType,"treasury.type_parameter");const e=[],t=[];var i;const d=this.data?.permission?.address,o=this.data?.object?.address;if(d&&(0,r.IsValidAddress)(d)){if(this.data?.object||t.push(r.PermissionIndex.treasury),void 0!==this.data?.description&&o&&t.push(r.PermissionIndex.treasury_descritption),void 0!==this.data?.withdraw_mode&&t.push(r.PermissionIndex.treasury_withdraw_mode),null==this.data?.withdraw_guard&&t.push(r.PermissionIndex.treasury_withdraw_guard),void 0!==this.data?.deposit_guard&&t.push(r.PermissionIndex.treasury_deposit_guard),void 0!==this.data?.deposit_guard&&t.push(r.PermissionIndex.treasury_deposit_guard),void 0!==this.data?.deposit?.guard)if((0,r.IsValidAddress)(this.data.deposit.guard))e.push(this.data.deposit.guard);else if(this.data.object){if(!i){const a=await(0,s.w$)({objects:[o],showContent:!0});a?.objects&&"Treasury"===a.objects[0].type&&(i=a.objects[0])}i?.deposit_guard&&e.push(i?.deposit_guard)}else this.data?.deposit_guard&&(0,r.IsValidAddress)(this.data?.deposit_guard)&&e.push(this.data.deposit_guard);if(void 0!==this.data?.receive&&t.push(r.PermissionIndex.treasury_receive),void 0!==this.data?.withdraw?.withdraw_guard){if("string"==typeof this.data.withdraw.withdraw_guard&&(0,r.IsValidAddress)(this.data.withdraw.withdraw_guard))e.push(this.data.withdraw.withdraw_guard);else if(this.data.object){if(!i){const a=await(0,s.w$)({objects:[o],showContent:!0});a?.objects&&"Treasury"===a.objects[0].type&&(i=a.objects[0])}"string"==typeof i?.withdraw_guard&&e.push(i?.withdraw_guard)}}else t.push(r.PermissionIndex.treasury_withdraw);return await this.check_permission_and_call(d,t,e,!1,void 0,a)}return await this.exec(a)}async operate(a,e,t){let s,i;const o=this.data?.permission?.address,n=this.data?.object?.address;if(n)(0,r.IsValidAddress)(n)&&this.data.type_parameter&&o&&(0,r.IsValidAddress)(o)?s=r.Treasury.From(a,this.data.type_parameter,o,n):(0,r.ERROR)(r.Errors.InvalidParam,"object or permission address invalid.");else{if(!o||!(0,r.IsValidAddress)(o)){const e=this.data?.permission?.description??"";i=r.Permission.New(a,e)}s=r.Treasury.New(a,this.data.type_parameter,i?i.get_object():o,this.data?.description??"",i?void 0:e)}if(s){const r=i?void 0:e;if(void 0!==this.data?.description&&n&&s?.set_description(this.data.description,r),void 0!==this.data.deposit){const e=await d.g.Instance().get_coin_object(a,this.data.deposit.data.balance,t,this.data.type_parameter);if(e){const a=this.data.deposit.data?.index??0;s?.deposit({coin:e,index:BigInt(a),remark:this.data.deposit.data.remark??"",for_guard:this.data.deposit.data?.for_guard,for_object:this.data.deposit.data?.for_object})}}if(void 0!==this.data?.receive&&s?.receive(this.data.receive.payment,this.data.receive.received_object,r),void 0!==this.data?.withdraw&&s?.withdraw(this.data.withdraw,r),void 0!==this.data?.deposit_guard&&s?.set_deposit_guard(this.data.deposit_guard,r),void 0!==this.data?.withdraw_guard)switch(this.data.withdraw_guard.op){case"add":this.data.withdraw_guard.data.forEach((a=>s?.add_withdraw_guard(a.guard,BigInt(a.amount),r)));break;case"remove":s?.remove_withdraw_guard(this.data.withdraw_guard.guards,!1,r);break;case"set":s?.remove_withdraw_guard([],!0,r),this.data.withdraw_guard.data.forEach((a=>s?.add_withdraw_guard(a.guard,BigInt(a.amount),r)));break;case"removeall":s?.remove_withdraw_guard([],!0,r)}void 0!==this.data?.withdraw_mode&&s?.set_withdraw_mode(this.data.withdraw_mode,r),i&&await this.new_with_mark(a,i.launch(),this.data?.permission?.namedNew,t),n||await this.new_with_mark(a,s.launch(),this.data?.object?.namedNew,t)}}}},6701:(a,e,t)=>{t.d(e,{U:()=>o});var r=t(7495),s=t(3245),i=t(6401),d=t(9766);class o extends i.s{data;constructor(a){super(),this.data=a}async call(a){this.data.type_parameter&&(0,r.IsValidArgType)(this.data.type_parameter)||(0,r.ERROR)(r.Errors.IsValidArgType,"service.type_parameter");const e=[],t=[];var i;const d=this.data?.permission?.address,o=this.data?.object?.address,n=this.data?.payee_treasury?.address;if(d&&(0,r.IsValidAddress)(d)){if(this.data?.object||t.push(r.PermissionIndex.service),void 0!==this.data?.description&&o&&t.push(r.PermissionIndex.service_description),void 0!==this.data?.bPaused&&t.push(r.PermissionIndex.service_pause),this.data?.bPublished&&t.push(r.PermissionIndex.service_publish),void 0!==this.data?.endpoint&&t.push(r.PermissionIndex.service_endpoint),void 0!==this.data?.repository&&t.push(r.PermissionIndex.service_repository),void 0!==this.data?.clone_new&&t.push(r.PermissionIndex.service_clone),void 0!==this.data?.gen_discount&&t.push(r.PermissionIndex.service_discount_transfer),void 0!==this.data?.arbitration&&t.push(r.PermissionIndex.service_arbitration),void 0!==this.data?.buy_guard&&t.push(r.PermissionIndex.service_buyer_guard),void 0!==this.data?.endpoint&&t.push(r.PermissionIndex.service_endpoint),void 0!==this.data?.extern_withdraw_treasury&&t.push(r.PermissionIndex.service_treasury),void 0!==this.data?.machine&&t.push(r.PermissionIndex.service_machine),void 0!==n&&o&&t.push(r.PermissionIndex.service_payee),void 0!==this.data?.withdraw_guard&&t.push(r.PermissionIndex.service_withdraw_guards),void 0!==this.data?.refund_guard&&t.push(r.PermissionIndex.service_refund_guards),void 0!==this.data?.customer_required_info&&t.push(r.PermissionIndex.service_customer_required),void 0!==this.data?.sales&&t.push(r.PermissionIndex.service_sales),void 0!==this.data?.order_new?.guard)if((0,r.IsValidAddress)(this.data.order_new.guard))e.push(this.data.order_new.guard);else if(this.data.object){if(!i){const a=await(0,s.w$)({objects:[o],showContent:!0});a?.objects&&"Service"===a.objects[0].type&&(i=a.objects[0])}i?.buy_guard&&e.push(i?.buy_guard)}else this.data?.buy_guard&&(0,r.IsValidAddress)(this.data.buy_guard)&&e.push(this.data?.buy_guard);return(0,r.IsValidAddress)(this.data?.order_refund?.guard)&&e.push(this.data?.order_refund?.guard),void 0!==this.data.order_withdrawl&&t.push(r.PermissionIndex.service_withdraw),"string"==typeof this.data?.order_withdrawl?.data?.withdraw_guard&&(0,r.IsValidAddress)(this.data?.order_withdrawl?.data?.withdraw_guard)&&e.push(this.data?.order_withdrawl?.data?.withdraw_guard),await this.check_permission_and_call(d,t,e,!1,void 0,a)}return await this.exec(a)}async operate(a,e,t){let s,i,o;const n=this.data?.permission?.address,c=this.data?.object?.address,h=this.data?.payee_treasury?.address;if(c)(0,r.IsValidAddress)(c)&&this.data.type_parameter&&n&&(0,r.IsValidAddress)(n)?s=r.Service.From(a,this.data.type_parameter,n,c):(0,r.ERROR)(r.Errors.InvalidParam,"object or permission address invalid.");else{if(!n||!(0,r.IsValidAddress)(n)){const e=this.data?.permission?.description??"";i=r.Permission.New(a,e)}if(!h||!(0,r.IsValidAddress)(h)){const t=this.data?.payee_treasury?.description??"";o=r.Treasury.New(a,this.data?.type_parameter,i??n,t,i?void 0:e)}s=r.Service.New(a,this.data.type_parameter,i?i.get_object():n,this.data?.description??"",o?o.get_object():h,i?void 0:e)}if(s){const n=i?void 0:e;if(void 0!==this.data?.description&&c&&s?.set_description(this.data.description,n),void 0!==this.data?.endpoint&&s?.set_endpoint(this.data.endpoint,n),void 0!==this.data?.payee_treasury&&c&&s?.set_payee(h,n),void 0!==this.data?.gen_discount&&s?.discount_transfer(this.data.gen_discount,n),void 0!==this.data?.repository)switch(this.data.repository.op){case"add":this.data.repository.repositories.forEach((a=>s?.add_repository(a,n)));break;case"remove":s?.remove_repository(this.data.repository.repositories,!1,n);break;case"set":s?.remove_repository([],!0,n),this.data.repository.repositories.forEach((a=>s?.add_repository(a,n)));break;case"removeall":s?.remove_repository([],!0,n)}if(void 0!==this.data?.extern_withdraw_treasury)switch(this.data.extern_withdraw_treasury.op){case"add":this.data.extern_withdraw_treasury.treasuries.forEach((a=>s?.add_treasury(a.token_type,a.address,n)));break;case"set":s?.remove_treasury([],!0,n),this.data.extern_withdraw_treasury.treasuries.forEach((a=>s?.add_treasury(a.token_type,a.address,n)));break;case"remove":s?.remove_treasury(this.data.extern_withdraw_treasury.addresses,!1,n);break;case"removeall":s?.remove_treasury([],!1,n)}if(void 0!==this.data?.machine&&s?.set_machine(this.data.machine,n),void 0!==this.data?.arbitration)switch(this.data.arbitration.op){case"add":this.data.arbitration.arbitrations.forEach((a=>s?.add_arbitration(a.address,a.token_type,n)));break;case"set":s?.remove_arbitration([],!0,n),this.data.arbitration.arbitrations.forEach((a=>s?.add_arbitration(a.address,a.token_type,n)));break;case"remove":s?.remove_arbitration(this.data.arbitration.addresses,!1,n);break;case"removeall":s?.remove_arbitration([],!1,n)}if(void 0!==this.data?.customer_required_info&&(this.data.customer_required_info.required_info&&this.data.customer_required_info.pubkey?s?.set_customer_required(this.data.customer_required_info.pubkey,this.data.customer_required_info.required_info,n):this.data.customer_required_info.pubkey&&s?.change_required_pubkey(this.data.customer_required_info.pubkey,n)),void 0!==this.data?.sales)switch(this.data.sales.op){case"add":s?.add_sales(this.data.sales.sales,!1,n);break;case"remove":s?.remove_sales(this.data.sales.sales_name,n)}if(void 0!==this.data?.withdraw_guard)switch(this.data.withdraw_guard.op){case"add":s?.add_withdraw_guards(this.data.withdraw_guard.guards,n);break;case"set":s?.remove_withdraw_guards([],!0,n),s?.add_withdraw_guards(this.data.withdraw_guard.guards,n);break;case"remove":s?.remove_withdraw_guards(this.data.withdraw_guard.addresses,!1,n);break;case"removeall":s?.remove_withdraw_guards([],!0,n)}if(void 0!==this.data?.refund_guard)switch(this.data.refund_guard.op){case"add":s?.add_refund_guards(this.data.refund_guard.guards,n);break;case"set":s?.remove_refund_guards([],!0,n),s?.add_refund_guards(this.data.refund_guard.guards,n);break;case"remove":s?.remove_refund_guards(this.data.refund_guard.addresses,!1,n);break;case"removeall":s?.remove_refund_guards([],!0,n)}var _;if(this.data?.bPublished&&s?.publish(n),void 0!==this.data?.order_new){let e,r=BigInt(0);this.data.order_new.buy_items.forEach((a=>{r+=BigInt(a.max_price)*BigInt(a.count)})),r>BigInt(0)&&(e=await d.g.Instance().get_coin_object(a,r,t,this.data.type_parameter),e&&(_=s.order(this.data.order_new.buy_items,e,this.data.order_new.discount,this.data.order_new.machine,this.data.order_new.customer_info_crypto,n)))}if(void 0!==this.data?.order_agent){const a=this.data.order_agent.order??_?.order;a||(0,r.ERROR)(r.Errors.Fail,"order invalid: order_agent"),s?.set_order_agent(a,this.data.order_agent.agents,this.data.order_agent.progress)}if(void 0!==this.data?.order_required_info){const a=this.data.order_required_info.order??_?.order;a||(0,r.ERROR)(r.Errors.Fail,"order invalid: order_required_info"),s?.update_order_required_info(a,this.data.order_required_info.info)}if(void 0!==this.data?.order_refund){const a=this.data.order_refund.order??_?.order;a||(0,r.ERROR)(r.Errors.Fail,"order invalid: order_refund"),this.data?.order_refund?.arb&&this.data?.order_refund?.arb_token_type?s?.refund_withArb(a,this.data?.order_refund?.arb,this.data?.order_refund?.arb_token_type):s?.refund(a,this.data?.order_refund?.guard,n)}if(void 0!==this.data?.order_withdrawl&&n){const a=this.data.order_withdrawl.order??_?.order;a||(0,r.ERROR)(r.Errors.Fail,"order invalid: order_withdrawl"),s?.withdraw(a,this.data.order_withdrawl.data,n)}if(void 0!==this.data?.order_payer&&s){const a=this.data.order_payer.order??_?.order;a||(0,r.ERROR)(r.Errors.Fail,"order invalid: order_payer"),s?.change_order_payer(a,this.data.order_payer.payer_new,this.data.order_payer.progress)}if(_&&this?.data?.order_new){const e=s.order_launch(_);await this.new_with_mark(a,e.order,this.data?.order_new?.namedNewOrder,t,[r.TagName.Launch,r.TagName.Order]),e?.progress&&await this.new_with_mark(a,e.progress,this.data?.order_new?.namedNewProgress,t,[r.TagName.Launch])}void 0!==this.data?.buy_guard&&s?.set_buy_guard(this.data.buy_guard,n),void 0!==this.data?.bPaused&&s?.pause(this.data.bPaused,n),void 0!==this.data?.clone_new&&s&&await this.new_with_mark(a,s.clone(this.data.clone_new?.token_type_new,!0,n),this.data?.clone_new?.namedNew,t),o&&await this.new_with_mark(a,o.launch(),this.data?.payee_treasury?.namedNew,t),i&&await this.new_with_mark(a,i.launch(),this.data?.permission?.namedNew,t),c||await this.new_with_mark(a,s.launch(),this.data?.object?.namedNew,t)}}}},7473:(a,e,t)=>{t.d(e,{H9:()=>y,JD:()=>O,Jj:()=>j,Tn:()=>l,U1:()=>u,Um:()=>P,_H:()=>m,bi:()=>R,cW:()=>g,cm:()=>k,h3:()=>x,ho:()=>N,nd:()=>f,os:()=>b,q0:()=>v,q_:()=>w,rL:()=>J,ti:()=>I,vF:()=>S,wi:()=>E});var r=t(6607),s=t(7439),i=t(159),d=t(7923),o=t(300),n=t(7604),c=t(6701),h=t(4873),_=t(3503),p=t(3769);const u=async a=>{try{const e=JSON.parse(a);return JSON.stringify({data:await I(e)})}catch(a){return JSON.stringify({error:a?.toString()})}},w=async a=>{try{const e=JSON.parse(a);return JSON.stringify({data:await N(e)})}catch(a){return JSON.stringify({error:a?.toString()})}},m=async a=>{try{const e=JSON.parse(a);return JSON.stringify({data:await x(e)})}catch(a){return JSON.stringify({error:a?.toString()})}},y=async a=>{try{const e=JSON.parse(a);return JSON.stringify({data:await P(e)})}catch(a){return JSON.stringify({error:a?.toString()})}},v=async a=>{try{const e=JSON.parse(a);return JSON.stringify({data:await S(e)})}catch(a){return JSON.stringify({error:a?.toString()})}},l=async a=>{try{const e=JSON.parse(a);return JSON.stringify({data:await J(e)})}catch(a){return JSON.stringify({error:a?.toString()})}},g=async a=>{try{const e=JSON.parse(a);return JSON.stringify({data:await j(e)})}catch(a){return JSON.stringify({error:a?.toString()})}},b=async a=>{try{const e=JSON.parse(a);return JSON.stringify({data:await R(e)})}catch(a){return JSON.stringify({error:a?.toString()})}},f=async a=>{try{const e=JSON.parse(a);return JSON.stringify({data:await E(e)})}catch(a){return JSON.stringify({error:a?.toString()})}},k=async a=>{try{const e=JSON.parse(a);return JSON.stringify({data:await O(e)})}catch(a){return JSON.stringify({error:a?.toString()})}},I=async a=>{const e=new s.W(a.data);return A(e,a.account,a.witness)},N=async a=>{const e=new c.U(a.data);return A(e,a.account,a.witness)},j=async a=>{const e=new h.c(a.data);return A(e,a.account,a.witness)},P=async a=>{const e=new n.t(a.data);return A(e,a.account,a.witness)},O=async a=>{const e=new _.g(a.data);return A(e,a.account,a.witness)},x=async a=>{const e=new i.g(a.data);return A(e,a.account,a.witness)},E=async a=>{const e=new o.R(a.data);return A(e,a.account,a.witness)},S=async a=>{const e=new d.Q(a.data);return A(e,a.account,a.witness)},J=async a=>{const e=new p.H(a.data);return A(e,a.account,a.witness)},R=async a=>{const e=new r.k(a.data);return A(e,a.account,a.witness)},A=async(a,e,t)=>t?a.call_with_witness(t,e):a.call(e)},7604:(a,e,t)=>{t.d(e,{t:()=>i});var r=t(7495),s=t(6401);class i extends s.s{data;constructor(a){super(),this.data=a}async call(a){const e=[],t=this.data?.permission?.address,s=this.data?.object?.address;return t&&(0,r.IsValidAddress)(t)?(this.data?.object||e.push(r.PermissionIndex.repository),void 0!==this.data?.description&&s&&e.push(r.PermissionIndex.repository_description),void 0!==this.data?.mode&&s&&e.push(r.PermissionIndex.repository_mode),void 0!==this.data?.reference&&e.push(r.PermissionIndex.repository_reference),void 0!==this.data?.policy&&e.push(r.PermissionIndex.repository_policies),await this.check_permission_and_call(t,e,[],!1,void 0,a)):await this.exec(a)}async operate(a,e,t){let s,i;const d=this.data?.permission?.address,o=this.data?.object?.address;if(o)(0,r.IsValidAddress)(o)&&this.data.permission&&(0,r.IsValidAddress)(d)?s=r.Repository.From(a,d,o):(0,r.ERROR)(r.Errors.InvalidParam,"object or permission address invalid.");else{if(!d||!(0,r.IsValidAddress)(d)){const e=this.data?.permission?.description??"";i=r.Permission.New(a,e)}s=r.Repository.New(a,i?i.get_object():d,this.data?.description??"",this.data?.mode,i?void 0:e)}if(s){const r=i?void 0:e;if(void 0!==this.data?.description&&o&&s?.set_description(this.data.description,r),void 0!==this.data?.reference)switch(this.data.reference.op){case"set":s?.remove_reference([],!0,r),s?.add_reference(this.data.reference.addresses,r);break;case"add":s?.add_reference(this.data.reference.addresses,r);break;case"remove":s?.remove_reference(this.data.reference.addresses,!1,r);break;case"removeall":s?.remove_reference([],!0,r)}if(void 0!==this.data?.mode&&o&&s?.set_policy_mode(this.data.mode,r),void 0!==this.data?.policy)switch(this.data.policy.op){case"set":s?.remove_policies([],!0,r),s?.add_policies(this.data.policy.data,r);break;case"add":s?.add_policies(this.data.policy.data,r);break;case"remove":s?.remove_policies(this.data.policy.keys,!1,r);break;case"removeall":s?.remove_policies([],!0,r);break;case"rename":this.data.policy.data.forEach((a=>{s?.rename_policy(a.old,a.new,r)}))}if(void 0!==this.data?.data)switch(this.data.data.op){case"add":void 0!==this.data.data?.data?.key?s?.add_data(this.data.data.data):void 0!==this.data.data?.data?.address&&s?.add_data2(this.data.data.data);break;case"remove":this.data.data.data.forEach((a=>s?.remove(a.address,a.key)))}i&&await this.new_with_mark(a,i.launch(),this.data?.permission?.namedNew,t),this.data.object||await this.new_with_mark(a,s.launch(),this.data?.object?.namedNew,t)}}}},7923:(a,e,t)=>{t.d(e,{Q:()=>i});var r=t(6401),s=t(7495);class i extends r.s{data;constructor(a){super(),this.data=a}async call(a){var e=!1,t=!1;const r=this.data?.object?.address;return r&&(0,s.IsValidAddress)(r)?(void 0===this.data?.builder&&void 0===this.data?.admin||(e=!0),void 0===this.data?.permission&&void 0===this.data?.biz_permission||(t=!0),void 0!==this.data?.description&&(t=!0),await this.check_permission_and_call(r,[],[],e,t,a)):await this.exec(a)}async operate(a,e,t){let r;const i=this.data?.object?.address;if(r=i&&(0,s.IsValidAddress)(i)?s.Permission.From(a,i):s.Permission.New(a,this.data?.description??""),r){if(void 0!==this.data?.description&&this.data.object&&r?.set_description(this.data.description),void 0!==this.data?.admin)switch(this.data.admin?.op){case"add":r?.add_admin(this.data.admin.addresses);break;case"remove":r?.remove_admin(this.data.admin.addresses);break;case"set":r?.remove_admin([],!0),r?.add_admin(this.data.admin.addresses);break;case"removeall":r?.remove_admin([],!0)}if(void 0!==this.data?.biz_permission)switch(this.data.biz_permission.op){case"add":this.data.biz_permission.data.forEach((a=>{r?.add_bizPermission(a.index,a.name)}));break;case"remove":this.data.biz_permission.permissions.forEach((a=>{r?.remove_bizPermission(a)}))}if(void 0!==this.data?.permission)switch(this.data.permission.op){case"add entity":r?.add_entity(this.data.permission.entities);break;case"add permission":r?.add_entity3(this.data.permission.permissions);break;case"remove entity":r?.remove_entity(this.data.permission.addresses);break;case"remove permission":r?.remove_index(this.data.permission.address,this.data.permission.index);break;case"transfer permission":r?.transfer_permission(this.data.permission.from_address,this.data.permission.to_address)}void 0!==this.data?.builder&&r?.change_owner(this.data.builder),i||await this.new_with_mark(a,r.launch(),this.data?.object?.namedNew,t)}}}},9832:(a,e,t)=>{t.d(e,{i:()=>r});var r,s=t(7495);!function(a){a.query_events_json=async e=>{try{const t=JSON.parse(e);return JSON.stringify({data:await a.query_events(t)})}catch(a){return JSON.stringify({error:a?.toString()})}},a.query_events=a=>{switch(a.type){case"OnNewArb":return e(a.cursor,a.limit,a.order);case"OnNewProgress":return r(a.cursor,a.limit,a.order);case"OnPresentService":return t(a.cursor,a.limit,a.order);case"OnNewOrder":return i(a.cursor,a.limit,a.order)}};const e=async(a,e,t)=>await d(s.Protocol.Instance().package("wowok")+"::arb::NewArbEvent",a,e,t),t=async(a,e,t)=>await d(s.Protocol.Instance().package("wowok")+"::demand::PresentEvent",a,e,t),r=async(a,e,t)=>await d(s.Protocol.Instance().package("wowok")+"::progress::NewProgressEvent",a,e,t),i=async(a,e,t)=>await d(s.Protocol.Instance().package("wowok")+"::order::NewOrderEvent",a,e,t),d=async(a,e,t,r)=>{const i=await s.Protocol.Client().queryEvents({query:{MoveEventType:a},cursor:e,limit:t,order:r}),d=i?.data?.map((a=>{if(a?.packageId===s.Protocol.Instance().package("wowok")){if(a?.type?.includes("::order::NewOrderEvent"))return{id:a?.id,time:a?.timestampMs,type_raw:a?.type,sender:a?.sender,type:"NewOrderEvent",order:a?.parsedJson?.object,service:a?.parsedJson?.service,progress:a?.parsedJson?.progress,amount:a?.parsedJson?.amount};if(a?.type?.includes("::demand::PresentEvent"))return{id:a?.id,time:a?.timestampMs,type_raw:a?.type,sender:a?.sender,type:"NewOrderEvent",demand:a?.parsedJson?.object,service:a?.parsedJson?.service,recommendation:a?.parsedJson?.tips};if(a?.type?.includes("::progress::NewProgressEvent"))return{id:a?.id,time:a?.timestampMs,type_raw:a?.type,sender:a?.sender,type:"NewOrderEvent",progress:a?.parsedJson?.object,machine:a?.parsedJson?.machine,task:a?.parsedJson?.task};if(a?.type?.includes("::arb::NewArbEvent"))return{id:a?.id,time:a?.timestampMs,type_raw:a?.type,sender:a?.sender,type:"NewOrderEvent",arb:a?.parsedJson?.object,arbitration:a?.parsedJson?.arbitration,order:a?.parsedJson?.order};if(a?.type?.includes("::entity::NewEntityEvent"))return{id:a?.id,time:a?.timestampMs,type_raw:a?.type,sender:a?.sender,type:"NewOrderEvent",resource:a?.parsedJson?.resource?.some,address:a?.parsedJson?.target}}return{id:a?.id,time:a?.timestampMs,type_raw:a?.type,sender:a?.sender,type:""}}));return{data:d,hasNextPage:i?.hasNextPage,nextCursor:i?.nextCursor}}}(r||(r={}))}}]);